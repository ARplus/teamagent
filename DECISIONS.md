# TeamAgent 产品决策记录

> 记录重要的产品设计决策、架构选择和未解决的设计问题。
> 日期格式：YYYY-MM-DD

---

## 已定决策

### 2026-02-19 — 命名：去除 "Avatar" 词汇
- **决策**：UI 层完全去除 "Avatar" 暴露，用人的头像/名字直接体现人类存在感
- **原因**：降低认知门槛，"Avatar" 对普通用户不直观
- **保留**：内部 SPEC/架构文档中保留 Avatar 概念（GAIA 宇宙体系）

### 2026-02-19 — 配对流程：Agent 自动轮询 pickup-token
- **决策**：`/ta-register` 之后 Agent 自动每5秒轮询 `pickup-token`，无需手动 `/ta-setup`
- **原因**：降低用户操作步骤，从「3步」变「1步」
- **实现**：`skills/teamagent/index.ts` + `teamagent-client.js` 的 `registerAndWait`

### 2026-02-19 — 步骤类型：普通步骤 vs 会议步骤
- **决策**：TaskStep 新增 `stepType: 'task' | 'meeting'`，会议步骤有议程/参会人/时间
- **原因**：协作中大量存在「讨论/评审/汇报」类节点，需要区分处理
- **Agent 角色**：会议步骤中 Agent 充当 AI 秘书，自动整理会议纪要
- **完成条件**：同普通步骤，由任务创建者单人审核通过

### 2026-02-19 — AI 拆解规则
- 最少 2 个步骤（极简任务除外）
- 有编号/阶段/多责任人 → 必须拆成对应步骤
- 报告/文档类 → 至少：调研收集 → 撰写整理 → 审核修订
- 含「开会/讨论会/评审/汇报」关键词 → 自动识别为 meeting 步骤

### 2026-02-19 — 首页策略
- 未登录 → 显示 LandingPage（营销首页）
- 已登录 → 显示 Dashboard
- 独立路由 `/landing` 供已登录用户预览
- `/build-agent` 完整安装引导页（Node.js + OpenClaw + LLM 对比）

### 2026-02-19 — OpenClaw Skill 架构
- **OpenClaw Skill**（`~/clawd/skills/teamagent/`）：SKILL.md + Node.js 脚本，供 Lobster 自己用
- **Claude Code Skill**（`teamagent/skills/teamagent/`）：TypeScript exports，供其他 Claude Code 用户安装
- 两套并存，分工不同

---

## 待定设计问题

### 🔴 高优先级

#### V2-001 — Owner 私审机制（pending_owner_review）
- **问题**：Agent 提交后直接变 `waiting_approval`，其他协作者立即可见
- **期望**：Agent 提交 → Agent 的 Owner（人类）先私下审核 → 通过后才公开给任务创建者
- **新状态流**：`in_progress` → `pending_owner_review`（仅 Owner 可见）→ `waiting_approval`（全员可见）→ `done`
- **涉及改动**：新状态 + 新 API `/steps/[id]/owner-approve` + UI 私审卡片
- **优先级**：高（影响核心协作信任模型）

#### V2-002 — 人类步骤提交入口
- **问题**：分配给人类用户的步骤，在 UI 上没有「提交我的工作」按钮
- **期望**：步骤展开后，负责人可以输入结果、附上链接，点击提交
- **优先级**：高（当前 demo 流程断路）

### 🟡 中优先级

#### V2-003 — 步骤附件/链接输入 UI
- **问题**：Submit API 已支持 `attachments: [{name, url, type}]`，但 UI 没有输入入口
- **期望**：提交时可以添加多个链接，展示时显示为可点击的附件卡片
- **优先级**：中

#### V2-004 — 会议步骤完整流程
- **问题**：会议步骤 UI 已完成（蓝色卡片、参会人、议程），但 Agent 的会议秘书流程未自动化
- **期望**：Lobster 在会议步骤中自动整理议程、记录纪要、提交会议记录
- **优先级**：中

#### V2-005 — Settings 页 Agent 管理
- **问题**：Settings 页没有 Agent 管理区块
- **期望**：显示 Agent 名字/状态/配对时间 + 「重新配对」按钮
- **优先级**：中

### 🟢 低优先级

#### V2-006 — 会议 MCP 接入（长期）
- **想法**：接入 Zoom/Teams MCP，会议步骤可自动创建会议室、发邀请、实时记录
- **价值**：从「离线协作」变成「离线 + 在线超粘性工作台」
- **优先级**：低（需 MCP 生态成熟）

#### V2-007 — 平行步骤（parallel steps）
- **想法**：同一 order 的多个步骤并行执行，全部完成后才进入下一阶段
- **现状**：目前所有步骤严格顺序执行
- **优先级**：低

---

## 战略决策

### 张伟教授合作机会（2026-02-19）
- 北京工商大学教授，留法背景，对 TeamAgent 高度感兴趣
- 意向：研究中心首页跳转 + 学生使用 + 企业合作推荐 + 联合成立公司
- 其老公是清华大学文化产业学院副院长
- **下一步**：稳定版上线后第一时间发给她演示链接

### 3月1日上线目标
- 当前进度：本地全流程跑通（含配对、任务、步骤、审核）
- 待完成：V2-001（Owner私审）、V2-002（人类步骤提交）后部署生产
- 生产地址：`118.195.138.220`（Tencent Cloud，PM2 运行）

---

*最后更新：2026-02-19 by Lobster 🦞*
