# TeamAgent 工作量追踪设计

> 讨论稿 - 2026-02-17

---

## 一、为什么要追踪？

1. **ROI 分析** — Agent 到底省了多少时间？
2. **瓶颈识别** — 哪些步骤总是卡在人类审批？
3. **能力评估** — 哪些类型的任务 Agent 能独立完成？
4. **资源规划** — 需要多少人类 + 多少 Agent？

---

## 二、追踪哪些指标？

### 时间指标

| 指标 | 说明 | 字段 |
|------|------|------|
| `claimedAt` | Agent 领取时间 | ✅ 已有 (`startedAt`) |
| `submittedAt` | Agent 提交时间 | ✅ 已有 (`completedAt`) |
| `approvedAt` | 人类审批时间 | ✅ 已有 |
| `agentDuration` | Agent 执行耗时 | 需计算 |
| `humanReviewDuration` | 人类审批耗时 | 需计算 |
| `rejectionCount` | 打回次数 | 需新增 |

### 工作量分配

```
┌────────────────────────────────────────────┐
│              总任务时间                      │
├──────────────────┬─────────────────────────┤
│   Agent 执行     │     人类审批/修改        │
│   (自动)         │     (手动)               │
├──────────────────┼─────────────────────────┤
│     70%          │        30%              │
└──────────────────┴─────────────────────────┘
```

### 需要新增的字段

```prisma
model TaskStep {
  // ... 现有字段
  
  // 新增追踪字段
  rejectionCount    Int       @default(0)  // 被打回次数
  agentDurationMs   Int?      // Agent 执行耗时（毫秒）
  humanDurationMs   Int?      // 人类审批耗时（毫秒）
}

model Task {
  // ... 现有字段
  
  // 新增统计字段
  totalAgentTimeMs  Int?      // 总 Agent 时间
  totalHumanTimeMs  Int?      // 总人类时间
  agentWorkRatio    Float?    // Agent 工作占比 (0-1)
}
```

---

## 三、Dashboard 展示

### 任务级别

```
📊 愚人节-华尔街日报克隆
├─ 总耗时: 4小时32分
├─ Agent 工作: 3小时15分 (72%)
├─ 人类审批: 1小时17分 (28%)
├─ 打回次数: 1次 (步骤3)
└─ 效率评分: ⭐⭐⭐⭐☆
```

### 团队级别

```
📈 本周团队统计
├─ 完成任务: 12个
├─ Agent 贡献: 68%
├─ 人类贡献: 32%
├─ 平均审批时间: 15分钟
└─ 零打回率: 75%
```

---

## 四、🦞 Lobster 的看法

### 关于"Fire 人类"

**坦诚说：这个数据可以用来裁员，但不应该这样用。**

#### 为什么？

1. **Agent 的能力边界**
   - Agent 擅长：执行明确任务、文档处理、代码生成
   - Agent 不擅长：决策判断、创意方向、人际沟通、突发应变
   
2. **人类的不可替代性**
   - 审批不是"橡皮图章"，是质量把关
   - 打回修改本身就是人类价值的体现
   - 任务拆解的"对不对"需要人类判断

3. **正确的用法**
   - 不是"Agent vs 人类"
   - 而是"Agent + 人类 > 原来的人类"
   - 追踪数据是为了优化协作，不是替代

#### 我的建议

| 指标 | 好的用途 | 危险的用途 |
|------|----------|------------|
| Agent 工作占比 | 识别可自动化的任务类型 | 证明人类没用 |
| 审批时间 | 优化审批流程 | 给人类施压 |
| 打回次数 | 改进 Agent 质量 | 责备人类审核太严 |

---

## 五、实施建议

### Phase 1: 基础追踪（本周）
- [ ] 添加 rejectionCount 字段
- [ ] 计算 agentDuration / humanDuration
- [ ] 任务详情页显示耗时

### Phase 2: Dashboard（下周）
- [ ] 团队统计页面
- [ ] 工作量可视化图表
- [ ] 导出报告功能

### Phase 3: 智能分析（后续）
- [ ] 识别低效环节
- [ ] 推荐任务分配
- [ ] 预测完成时间

---

*这份文档代表 Lobster 的真实想法。*
*如果老板只是想找数据裁人，我建议别做这个功能。*
*但如果是为了真正优化协作，那值得做。* 🦞
