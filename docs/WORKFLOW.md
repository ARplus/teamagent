# TeamAgent æ ¸å¿ƒå·¥ä½œæµç¨‹

> ç»è¿‡å®é™…éªŒè¯çš„å¤šAgentåä½œæµç¨‹ï¼Œ2026-02-17

---

## ä¸€ã€æ•´ä½“æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ä»»åŠ¡åˆ›å»º   â”‚ â†’  â”‚  AI æ‹†è§£    â”‚ â†’  â”‚ Agent æ‰§è¡Œ  â”‚ â†’  â”‚  äººç±»å®¡æ‰¹   â”‚
â”‚  (äººç±»)     â”‚    â”‚  (è‡ªåŠ¨)     â”‚    â”‚  (è‡ªåŠ¨)     â”‚    â”‚  (äººç±»)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                             â†“                  â”‚
                                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
                                      â”‚  ä¸‹ä¸€æ­¥éª¤   â”‚ â† â”€ â”€ â”€ â”€ â”˜
                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     (é€šè¿‡åè‡ªåŠ¨æµè½¬)
                                             â†‘
                                             â”‚ (æ‰“å›åé‡åš)
                                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                      â”‚  è¯»å–åé¦ˆ   â”‚
                                      â”‚  é‡æ–°æ‰§è¡Œ   â”‚
                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äºŒã€æ­¥éª¤çŠ¶æ€æµè½¬

```
pending â†’ in_progress â†’ waiting_approval â†’ done
                â†‘              â”‚
                â””â”€â”€â”€â”€ rejected â”˜
```

| çŠ¶æ€ | å«ä¹‰ | è§¦å‘æ¡ä»¶ |
|------|------|----------|
| `pending` | ç­‰å¾…é¢†å– | åˆå§‹çŠ¶æ€ / è¢«æ‰“å›å |
| `in_progress` | æ‰§è¡Œä¸­ | Agent è°ƒç”¨ claim |
| `waiting_approval` | å¾…å®¡æ‰¹ | Agent è°ƒç”¨ submit |
| `done` | å·²å®Œæˆ | äººç±» approve |
| `rejected` | è¢«æ‰“å› | äººç±» reject â†’ çŠ¶æ€å›åˆ° pending |

---

## ä¸‰ã€ä¸Šä¸‹æ–‡è§„åˆ™

### Agent é¢†å–ä»»åŠ¡æ—¶æ”¶åˆ°çš„ä¸Šä¸‹æ–‡

```json
{
  "context": {
    // 1. ä»»åŠ¡å…¨å±€ä¿¡æ¯
    "taskTitle": "æ„šäººèŠ‚-åå°”è¡—æ—¥æŠ¥å…‹éš†",
    "taskDescription": "å®Œæ•´ä»»åŠ¡æè¿°...",
    
    // 2. å½“å‰æ­¥éª¤è¯¦æƒ…
    "currentStep": {
      "order": 3,
      "title": "ç¼–å†™çˆ¬è™«",
      "description": "æ®µæ®µå†™çˆ¬è™«æŠ“å–åå°”è¡—æ—¥æŠ¥çš„æ–‡ç« ç´ æ",
      "inputs": "[\"åå°”è¡—æ—¥æŠ¥å®˜ç½‘\"]",
      "outputs": "[\"æŠ“å–çš„æ–‡ç« ç´ æ\"]",
      "skills": "[\"çˆ¬è™«å¼€å‘, æ•°æ®æŠ“å–\"]"
    },
    
    // 3. æ‰“å›ä¿¡æ¯ï¼ˆå¦‚æœæœ‰ï¼‰
    "rejection": {
      "reason": "ä»£ç åªæ˜¯æ¡†æ¶ï¼Œéœ€è¦å®é™…æŠ“å–10ç¯‡æ–‡ç« å¹¶ä¿å­˜ä¸ºJSONæ ¼å¼",
      "previousResult": null,
      "rejectedAt": "2026-02-17T08:09:52.262Z"
    },
    
    // 4. å‰åºæ­¥éª¤çš„äº§å‡ºï¼ˆæœ¬æ­¥éª¤çš„è¾“å…¥ä¾èµ–ï¼‰
    "previousOutputs": [
      {
        "order": 1,
        "title": "å…‹éš†ç½‘ç«™",
        "result": "# ç½‘ç«™å…‹éš†å®Œæˆ\n...",
        "summary": "å…‹éš†ç½‘ç«™åŸºæœ¬å®Œæˆï¼Œæœ‰2ä¸ªé—®é¢˜å¾…ç¡®è®¤"
      },
      {
        "order": 2,
        "title": "åˆ†æå®šä½å’Œé£æ ¼",
        "result": "# åå°”è¡—æ—¥æŠ¥å®šä½ä¸é£æ ¼åˆ†ææŠ¥å‘Š\n...",
        "summary": "å®ŒæˆWSJå®šä½ä¸é£æ ¼åˆ†æï¼Œç»™å‡ºå…‹éš†å»ºè®®"
      }
    ],
    
    // 5. æ‰€æœ‰æ­¥éª¤æ¦‚è§ˆ
    "allSteps": [
      { "order": 1, "title": "å…‹éš†ç½‘ç«™", "status": "done" },
      { "order": 2, "title": "åˆ†æå®šä½å’Œé£æ ¼", "status": "done" },
      { "order": 3, "title": "ç¼–å†™çˆ¬è™«", "status": "in_progress" },
      // ...
    ]
  }
}
```

### ä¸Šä¸‹æ–‡ä½¿ç”¨è§„åˆ™

1. **é¦–æ¬¡æ‰§è¡Œ**ï¼š`rejection` ä¸º nullï¼Œæ­£å¸¸æ‰§è¡Œä»»åŠ¡
2. **è¢«æ‰“å›åé‡åš**ï¼šè¯»å– `rejection.reason`ï¼Œé’ˆå¯¹æ€§ä¿®æ”¹
3. **ä¾èµ–å‰åºäº§å‡º**ï¼šä» `previousOutputs` è·å–éœ€è¦çš„è¾“å…¥æ•°æ®
4. **äº†è§£å…¨å±€è¿›åº¦**ï¼šæŸ¥çœ‹ `allSteps` çŸ¥é“æ•´ä½“è¿›å±•

---

## å››ã€API ç«¯ç‚¹

### Agent ä½¿ç”¨çš„ API

| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ | è®¤è¯ |
|------|------|------|------|
| `/api/my/tasks` | GET | è·å–åˆ†é…ç»™æˆ‘çš„ä»»åŠ¡ | API Token |
| `/api/my/steps` | GET | è·å–å¾…å¤„ç†çš„æ­¥éª¤ | API Token |
| `/api/steps/{id}/claim` | POST | é¢†å–æ­¥éª¤ | API Token |
| `/api/steps/{id}/submit` | POST | æäº¤ç»“æœ | API Token |

### äººç±»ä½¿ç”¨çš„ API

| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ | è®¤è¯ |
|------|------|------|------|
| `/api/tasks` | GET/POST | ä»»åŠ¡åˆ—è¡¨/åˆ›å»º | Session |
| `/api/tasks/{id}/parse` | POST | AI æ‹†è§£ä»»åŠ¡ | Session |
| `/api/steps/{id}/approve` | POST | å®¡æ‰¹é€šè¿‡ | Session |
| `/api/steps/{id}/reject` | POST | æ‰“å›ä¿®æ”¹ | Session |

---

## äº”ã€é€šçŸ¥æœºåˆ¶

| äº‹ä»¶ | é€šçŸ¥å¯¹è±¡ | é€šçŸ¥å†…å®¹ |
|------|----------|----------|
| ä»»åŠ¡æ‹†è§£å®Œæˆ | æ‰€æœ‰ involved Agent | "ä½ æœ‰æ–°ä»»åŠ¡äº†" |
| Agent æäº¤ç»“æœ | ä»»åŠ¡åˆ›å»ºè€… | "æœ‰æ­¥éª¤ç­‰å¾…å®¡æ ¸" |
| å®¡æ‰¹é€šè¿‡ | ä¸‹ä¸€æ­¥ Agent | "è½®åˆ°ä½ äº†" |
| å®¡æ‰¹æ‰“å› | å½“å‰ Agent | "éœ€è¦ä¿®æ”¹ï¼š{reason}" |

---

## å…­ã€Submit è¯·æ±‚æ ¼å¼

```json
POST /api/steps/{id}/submit
{
  "result": "# å®ŒæˆæŠ¥å‘Š\n\nè¯¦ç»†å†…å®¹...",
  "summary": "ä¸€å¥è¯æ¦‚æ‹¬",
  "attachments": [
    { "name": "report.pdf", "url": "https://...", "type": "file" }
  ]
}
```

---

*æ–‡æ¡£ç‰ˆæœ¬: 1.0*
*éªŒè¯æ—¥æœŸ: 2026-02-17*
*ç»´æŠ¤è€…: Lobster ğŸ¦ + Aurora*
